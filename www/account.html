<!DOCTYPE HTML>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0 minimal-ui" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="styles/materialize_custom.css">
<link rel="stylesheet" type="text/css" href="styles/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="styles/swiper.min.css">
<link rel="stylesheet" type="text/css" href="styles/style.css">
<link rel="stylesheet" type="text/css" href="styles/menu.css">
<link rel="stylesheet" type="text/css" href="styles/framework.css">
<link rel="stylesheet" type="text/css" href="styles/font-awesome.css">
<link rel="stylesheet" type="text/css" href="styles/custom.css">
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<script type="text/javascript" src="scripts/popper.min.js"></script>
<script type="text/javascript" src="scripts/popper-utils.min.js"></script>
<script type="text/javascript" src="scripts/jquery.js"></script>
<script type="text/javascript" src="scripts/materialize.js"></script>
<script type="text/javascript" src="scripts/moment.js"></script>
<script type="text/javascript" src="scripts/bootstrap.min.js"></script>
<script type="text/javascript" src="scripts/bootstrap-datetimepicker.min.js"></script>
<script type="text/javascript" src="scripts/carousel-swipe.js"></script>
<script type="text/javascript" src="scripts/fastclick.js"></script>
<script type="text/javascript" src="scripts/swiper.jquery.min.js"></script>
<script type="text/javascript" src="scripts/core.js"></script>
<script type="text/javascript" src="scripts/plugins.js"></script>
<script type="text/javascript" src="scripts/custom.js"></script>
<script type="text/javascript" src="scripts/jquery.jscroll.js"></script>
<script type="text/javascript" src="scripts/openfb.js"></script>
</head>

<body class="account" onload="onLoad()">
<div class="header-fixed header-light"></div>
				
<div id="page-content">
	<div id="page-content-scroll"><!--Enables this element to be scrolled -->        
		<div class="header-clear"></div>
		<div id="container"><img src="./images/spinner.gif" class="preloader"></div>
		<div class="footer-clear-disabled"></div>
	</div>
</div>

<nav class="light-blue lighten-1" role="navigation">
    <div class="nav-wrapper container">
		<div id="nav-mobile" class="side-nav">
			<div class="sidebar-left sidebar-light active-sidebar-box">
				<div class="sidebar-scroll">
					<div class="sidebar-header"></div>        
					<div class="sidebar-menu"></div>
				</div>
			</div>
		</div>
    </div>
</nav>
<div id="page-footer"></div>
<script>
	function onFacebookLogins(appid = "")
	{
		// Defaults to sessionStorage for storing the Facebook token
		openFB.init({appId: appid});
		//  Uncomment the line below to store the Facebook token in localStorage instead of sessionStorage
		//  openFB.init({appId: 'YOUR_FB_APP_ID', tokenStore: window.localStorage});
		openfblogin();
	}
	
    function openfblogin() {
        openFB.login(
			function(response) {
				if(response.status === 'connected') {
					// alert('Facebook login succeeded, got access token: ' + response.authResponse.accessToken);
					openFB.api({
						path: '/me',
						params: { fields: "name,email,id,first_name,last_name" },
						success: function(data) {
							// var post = [];
							// post['id']          = data.id;
							// post['firstname']   = data.first_name;
							// post['lastname']    = data.last_name;
							// post['email']       = data.email;
							
							// $.ajax({
							// 	method: "POST",
							// 	url: host + "index.php?route=extension/module/mobi_sociallogin/FacebookSecondLogin",
							// 	data: { id: data.id, firstname: data.first_name, lastname: data.last_name, email: data.email }
							// 	async: false,
							// 	xhrFields: {
							// 		withCredentials: true
							// 	}
							// }).done(function(data) {
							// 	json_user = JSON.parse(data);
							// 	localStorage.setItem("json_user", data);
							// });
							
							alert(data.id);
						},
						error: errorHandler
					});
				} else {
					// alert('Facebook login failed: ' + response.error);
				}
		}, {scope: 'email'});
    }
	
    function logout() {
        openFB.logout(
                function() {
                    alert('Logout successful');
                },
                errorHandler);
    }
    function errorHandler(error) {
        // alert(error.message);
    }
</script>
</body>